webpackJsonp([1],{"2MjE":function(t,e){},LqIZ:function(t,e){},Q9Ol:function(t,e){},VPiq:function(t,e){},x35b:function(t,e,r){"use strict";function n(t,e,r){return void 0===r&&(r=1),t.map(function(t){return t.data}).reduce(function(t,e){return e.forEach(function(e){return t[e.team]=[e.value/r].concat(t[e.team])}),t},e.map(function(){return[]}))}function i(t){return g.a.get(t)}function s(t){return t.data}function a(){return i(b).then(function(t){return s(t)}).then(function(t){return t.leagues})}function u(){return i(L).then(function(t){return s(t)}).then(function(t){return t.teams})}function o(){return i(y).then(function(t){return s(t)}).then(function(t){return t.seasons})}function c(){return i(x).then(function(t){return s(t)}).then(function(t){return t.seasons})}function l(t){r("LqIZ")}function h(t){return Math.log(t)/Math.LN10+1|0}function f(t){r("2MjE")}function m(t){r("Q9Ol")}function p(t){r("yArI")}function v(t){r("VPiq")}Object.defineProperty(e,"__esModule",{value:!0});var d=r("/5sW"),_=(r("SCKt"),r("0K64"),r("mtWM")),g=r.n(_),b="./static/npb-leagues.json",L="./static/npb-teams.json",y="./static/npb-number-of-visitors-history.json",x="./static/npb-pennant-race-history.json",C=(r("cUYv"),d.a.extend({name:"TabList",props:{labels:{type:Array,required:!0,validator:function(t){return t.every(function(t){return"string"==typeof t})}}},data:function(){return{current:0}},methods:{handleClickItem:function(t){this.current=Math.max(0,Math.min(t,this.labels.length-1)),this.$emit("click-item",t)}}})),V=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"tab-list"},[r("ul",t._l(t.labels,function(e,n){return r("li",{key:e,class:{"is-current":n===t.current}},[r("a",{attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.handleClickItem(n)}}},[t._v(t._s(e))])])}))])},A=[],H={render:V,staticRenderFns:A},P=H,k=r("VU/8"),S=l,M=k(C,P,!1,S,"data-v-72429909",null),T=M.exports,B=r("8r4o"),W=r.n(B),R=r("rcfA"),O=r.n(R),w=r("d7WX"),N=r.n(w),U=r("fw2W"),j=r.n(U),E=d.a.extend({name:"LegendList",props:{series:{type:Array,default:function(){return[]}}}}),I=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"legend-list"},[r("ul",t._l(t.series,function(e){return e.isVisible?r("li",{key:e.id},[r("svg",{attrs:{viewBox:"0 0 32 24",width:"32",height:"24"}},[r("path",{attrs:{d:"M0,12.5 H32",stroke:e.color}})]),t._v(" "),r("span",[t._v(t._s(e.name))])]):t._e()}))])},$=[],q={render:I,staticRenderFns:$},D=q,F=r("VU/8"),X=f,G=F(E,D,!1,X,"data-v-47f8916c",null),K=G.exports,Q=d.a.extend({name:"ChartLine",components:{LegendList:K},props:{svgWidth:{type:Number,default:1140},svgHeight:{type:Number,default:640},paddingBottom:{type:Number,default:24},paddingLeft:{type:Number,default:80},paddingRight:{type:Number,default:40},series:{type:Array,required:!0},lines:{type:Array,default:function(){return[]}},xAxisLabels:{type:Array,default:function(){return[]}},yAxisUnit:{type:String,default:""}},computed:{viewBox:function(){return"0 0 "+this.svgWidth+" "+this.svgHeight},chartHeight:function(){return this.svgHeight-this.paddingBottom},allValues:function(){return this.series.reduce(function(t,e){return t.concat(e)},[])},_maxValue:function(){return Math.max.apply(Math,this.allValues)},_minValue:function(){return Math.min.apply(Math,this.allValues)},maxValue:function(){return N()(this._maxValue,-1*(h(this._maxValue)-2))},minValue:function(){return j()(this._minValue,-1*(h(this._minValue)-2))},valueReminder:function(){return this.maxValue-this.minValue},percentOfSeries:function(){var t=this;return this.series.map(function(e){return e.map(function(e){return(e-t.minValue)/t.valueReminder})})},yAxisLinePropsList:function(){var t="M0,0.5 H"+this.svgWidth;return W()(0,this.chartHeight,this.chartHeight/4).concat([this.chartHeight]).map(function(e){var r=O()(e,2);return{y:r,d:t,transform:"translate(0, "+r+")"}})},yAxisLabelPropsList:function(){var t=this;return[0,.5,1].map(function(e){return{value:t.minValue+t.valueReminder*e,transform:"translate(0, "+O()(t.chartHeight*e*-1,2)+")"}})},yAxisLabelTransform:function(){return"translate(0 "+this.chartHeight+")"},chartWidth:function(){return this.svgWidth-(this.paddingLeft+this.paddingRight)},xAxisStep:function(){return this.chartWidth/Math.max.apply(Math,this.series.map(function(t){return t.length-1}))},seriesLineTransform:function(){return"translate("+this.paddingLeft+" "+this.chartHeight+")"},seriesLinePointList:function(){var t=this;return this.percentOfSeries.map(function(e){return e.map(function(e,r){return[O()(t.xAxisStep*r,2),O()(t.chartHeight*e*-1,2)]})})},seriesLinePropsList:function(){var t=this;return this.seriesLinePointList.map(function(e,r){var n=t.lines[r],i=n.color;return{isVisible:n.isVisible,color:i,points:e.map(function(t){return t.join(" ")}).join(" ")}})},seriesDotPropsList:function(){return this.seriesLinePointList.map(function(t){return t.map(function(t){return{transform:"translate("+t[0]+" "+t[1]+")"}})})},xAxisLabelPropsList:function(){var t=this;return this.xAxisLabels.map(function(e,r){return{value:e,transform:"translate("+O()(t.xAxisStep*r,2)+")"}})}}}),Z=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"chart-line"},[r("LegendList",{attrs:{series:t.lines}}),t._v(" "),r("p",{staticClass:"chart-line__unit"},[t._v(t._s(t.yAxisUnit))]),t._v(" "),r("svg",{attrs:{viewBox:t.viewBox,width:t.svgWidth,height:t.svgHeight}},[r("g",{staticClass:"chart-line__y-step-line"},t._l(t.yAxisLinePropsList,function(t){return r("path",{key:t.y,attrs:{d:t.d,transform:t.transform}})})),t._v(" "),r("g",{staticClass:"chart-line__y-label"},[r("g",{attrs:{transform:t.yAxisLabelTransform}},t._l(t.yAxisLabelPropsList,function(e){return r("text",{key:e.value,attrs:{x:"0",y:"0",transform:e.transform}},[t._v(t._s(e.value))])}))]),t._v(" "),r("g",{attrs:{transform:t.seriesLineTransform}},[r("g",{staticClass:"chart-line__series-line"},t._l(t.seriesLinePropsList,function(e,n){return e.isVisible?r("polyline",{key:n,attrs:{points:e.points,stroke:e.color}}):t._e()})),t._v(" "),r("g",{staticClass:"chart-line__series-dot"},t._l(t.seriesDotPropsList,function(e,n){return t.seriesLinePropsList[n].isVisible?r("g",{key:n,attrs:{fill:t.seriesLinePropsList[n].color}},t._l(e,function(t,e){return r("circle",{key:e,attrs:{cx:"0",cy:"0",transform:t.transform}})})):t._e()}))]),t._v(" "),r("g",{staticClass:"chart-line__x-label"},[r("g",{attrs:{transform:t.seriesLineTransform}},t._l(t.xAxisLabelPropsList,function(e){return r("text",{key:e.value,attrs:{x:"0",y:"0",transform:e.transform}},[t._v(t._s(e.value))])}))])])],1)},J=[],Y={render:Z,staticRenderFns:J},z=Y,tt=r("VU/8"),et=m,rt=tt(Q,z,!1,et,"data-v-3a1d9658",null),nt=rt.exports,it=d.a.extend({name:"ChartBar",props:{svgWidth:{type:Number,default:1140},svgHeight:{type:Number,default:640},paddingBottom:{type:Number,default:24},paddingLeft:{type:Number,default:120},paddingRight:{type:Number,default:90},series:{type:Array,required:!0},lines:{type:Array,default:function(){return[]}},yAxisUnit:{type:String,default:""}},computed:{viewBox:function(){return"0 0 "+this.svgWidth+" "+this.svgHeight},chartHeight:function(){return this.svgHeight-this.paddingBottom},visibleLines:function(){return this.lines.filter(function(t){return t.isVisible})},visibleSeries:function(){var t=this;return this.lines.length<1?this.series:this.visibleLines.map(function(e){return t.series[e.id]})},_maxValue:function(){return Math.max.apply(Math,this.series)},_minValue:function(){return Math.min.apply(Math,this.series)},maxValue:function(){return N()(this._maxValue,-1*(h(this._maxValue)-2))},minValue:function(){return j()(this._minValue,-1*(h(this._minValue)-2))},valueReminder:function(){return this.maxValue-this.minValue},percentOfSeries:function(){var t=this;return this.visibleSeries.map(function(e){return(e-t.minValue)/t.valueReminder})},yAxisLinePropsList:function(){var t="M0,0.5 H"+this.svgWidth;return W()(0,this.chartHeight,this.chartHeight/4).concat([this.chartHeight]).map(function(e){var r=O()(e,2);return{y:r,d:t,transform:"translate(0, "+r+")"}})},yAxisLabelPropsList:function(){var t=this;return[0,.5,1].map(function(e){return{value:t.minValue+t.valueReminder*e,transform:"translate(0, "+O()(t.chartHeight*e*-1,2)+")"}})},yAxisLabelTransform:function(){return"translate(0 "+this.chartHeight+")"},chartWidth:function(){return this.svgWidth-(this.paddingLeft+this.paddingRight)},xAxisStep:function(){return this.chartWidth/(this.visibleSeries.length-1)},seriesLineTransform:function(){return"translate("+this.paddingLeft+" "+this.chartHeight+")"},seriesLinePointList:function(){var t=this;return this.percentOfSeries.map(function(e,r){return[O()(t.xAxisStep*r,2),O()(t.chartHeight*e*-1,2)]})},seriesLinePropsList:function(){var t=this;return this.seriesLinePointList.map(function(e,r){var n=t.visibleLines[r].color,i=e[0];return{color:n,d:"M0,0 V"+e[1],transform:"translate("+i+")"}})},xAxisLabelPropsList:function(){var t=this;return this.visibleLines.map(function(e,r){return{value:e.name,transform:"translate("+O()(t.xAxisStep*r,2)+")"}})}}}),st=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"chart-bar"},[r("p",{staticClass:"chart-bar__unit"},[t._v(t._s(t.yAxisUnit))]),t._v(" "),r("svg",{attrs:{viewBox:t.viewBox,width:t.svgWidth,height:t.svgHeight}},[r("g",{staticClass:"chart-bar__y-step-line"},t._l(t.yAxisLinePropsList,function(t){return r("path",{key:t.y,attrs:{d:t.d,transform:t.transform}})})),t._v(" "),r("g",{staticClass:"chart-bar__y-label"},[r("g",{attrs:{transform:t.yAxisLabelTransform}},t._l(t.yAxisLabelPropsList,function(e){return r("text",{key:e.value,attrs:{x:"0",y:"0",transform:e.transform}},[t._v(t._s(e.value))])}))]),t._v(" "),r("g",{attrs:{transform:t.seriesLineTransform}},[r("g",{staticClass:"chart-bar__series-bar"},t._l(t.seriesLinePropsList,function(t,e){return r("path",{key:e,attrs:{d:t.d,stroke:t.color,transform:t.transform}})}))]),t._v(" "),r("g",{staticClass:"chart-bar__x-label"},[r("g",{attrs:{transform:t.seriesLineTransform}},t._l(t.xAxisLabelPropsList,function(e){return r("text",{key:e.value,attrs:{x:"0",y:"0",transform:e.transform}},[t._v(t._s(e.value))])}))])])])},at=[],ut={render:st,staticRenderFns:at},ot=ut,ct=r("VU/8"),lt=p,ht=ct(it,ot,!1,lt,"data-v-348a06dc",null),ft=ht.exports,mt=d.a.extend({name:"app",components:{TabList:T,ChartLine:nt,ChartBar:ft},data:function(){return{leagues:[],teams:[],numberOfVisitorsHistory:[],pennantRaceHistory:[],lineChartCurrentLeague:0,barChartCurrentLeague:0,barChartCurrentSeason:null}},computed:{tabLabels:function(){return this.leagues.map(function(t){return t.name})},lineChartHistoryList:function(){return n(this.numberOfVisitorsHistory,this.teams,1e3)},lineChartPropsList:function(){var t=this;return this.teams.map(function(e){return{id:e.id,name:e.name,color:e.color,isVisible:e.league===t.lineChartCurrentLeague}})},lineChartXAxisLabelList:function(){return this.numberOfVisitorsHistory.map(function(t){return t.season}).reverse()},barChartSeasonOptionList:function(){return this.numberOfVisitorsHistory.map(function(t){return t.season})},barChartCurrentSeasonList:function(){var t=this,e=this.numberOfVisitorsHistory.find(function(e){return e.season===t.barChartCurrentSeason});return e?e.data.map(function(t){return t.value/1e3}):[]},barChartPropsList:function(){var t=this;return this.teams.map(function(e){return{id:e.id,name:e.name,color:e.color,isVisible:e.league===t.barChartCurrentLeague}})}},methods:{fetchAll:function(){return Promise.all([a(),u(),o(),c()])},handleClickLineChartTabItem:function(t){this.lineChartCurrentLeague=t},handleClickBarChartTabItem:function(t){this.barChartCurrentLeague=t}},created:function(){var t=this;this.fetchAll().then(function(e){var r=e[0],n=e[1],i=e[2],s=e[3],a=Math.max.apply(Math,i.map(function(t){return t.season}));Object.assign(t,{leagues:r,teams:n,numberOfVisitorsHistory:i,pennantRaceHistory:s,barChartCurrentSeason:a})}).catch(function(t){return console.error(t.message)})}}),pt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[t._m(0,!1,!1),t._v(" "),r("div",{staticClass:"container"},[r("h2",[t._v("Line chart")]),t._v(" "),r("p",[t._v("History of NPB's annual visitors.")]),t._v(" "),r("TabList",{attrs:{labels:t.tabLabels},on:{"click-item":t.handleClickLineChartTabItem}}),t._v(" "),r("ChartLine",{attrs:{series:t.lineChartHistoryList,lines:t.lineChartPropsList,xAxisLabels:t.lineChartXAxisLabelList,yAxisUnit:"x 1000"}})],1),t._v(" "),r("div",{staticClass:"container"},[r("h2",[t._v("Bar chart")]),t._v(" "),r("p",[t._v("Annual visitors per team")]),t._v(" "),r("div",{staticClass:"comb-tab-select"},[r("TabList",{attrs:{labels:t.tabLabels},on:{"click-item":t.handleClickBarChartTabItem}}),t._v(" "),r("p",{staticClass:"comb-tab-select__select"},[r("span",[t._v("Season: ")]),t._v(" "),r("select",{directives:[{name:"model",rawName:"v-model",value:t.barChartCurrentSeason,expression:"barChartCurrentSeason"}],on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.barChartCurrentSeason=e.target.multiple?r:r[0]}}},t._l(t.barChartSeasonOptionList,function(e){return r("option",{key:e,domProps:{value:e}},[t._v(t._s(e))])}))])],1),t._v(" "),r("ChartBar",{attrs:{series:t.barChartCurrentSeasonList,lines:t.barChartPropsList,yAxisUnit:"x 1000"}})],1),t._v(" "),t._m(1,!1,!1),t._v(" "),t._m(2,!1,!1)])},vt=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("header",{staticClass:"container"},[r("h1",[t._v("Vue Graph Demo")]),t._v(" "),r("p",[t._v("Demos of graph that render by Vue.js without D3.js.")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container"},[r("h2",[t._v("Pie chart")]),t._v(" "),r("p",[t._v("Under constructing...")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("footer",{staticClass:"container"},[r("p",[r("a",{attrs:{href:"https://github.com/haribote/vue-graph-demo",target:"_blank"}},[t._v("Fork on GitHub")])])])}],dt={render:pt,staticRenderFns:vt},_t=dt,gt=r("VU/8"),bt=v,Lt=gt(mt,_t,!1,bt,null,null),yt=Lt.exports;d.a.config.productionTip=!1,new d.a({el:"#app",render:function(t){return t(yt)}})},yArI:function(t,e){}},["x35b"]);
//# sourceMappingURL=app.8fdd630e0737dc2b0636.js.map