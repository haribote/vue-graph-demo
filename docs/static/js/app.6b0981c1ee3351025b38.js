webpackJsonp([1],{"2MjE":function(t,e){},BpIx:function(t,e){},LqIZ:function(t,e){},Q9Ol:function(t,e){},goQF:function(t,e){},rgtM:function(t,e){},x35b:function(t,e,r){"use strict";function n(t,e,r){return void 0===r&&(r=1),t.map(function(t){return t.data}).reduce(function(t,e){return e.forEach(function(e){return t[e.team]=[e.value/r].concat(t[e.team])}),t},e.map(function(){return[]}))}function i(t){return L.a.get(t)}function s(t){return t.data}function a(){return i(y).then(function(t){return s(t)}).then(function(t){return t.leagues})}function u(){return i(C).then(function(t){return s(t)}).then(function(t){return t.teams})}function o(){return i(x).then(function(t){return s(t)}).then(function(t){return t.seasons})}function l(){return i(V).then(function(t){return s(t)}).then(function(t){return t.seasons})}function c(t){r("LqIZ")}function h(t){return Math.log(t)/Math.LN10+1|0}function f(t){r("2MjE")}function p(t){r("Q9Ol")}function m(t){r("yArI")}function v(t){r("rgtM")}function d(t){r("goQF")}function g(t){r("BpIx")}Object.defineProperty(e,"__esModule",{value:!0});var _=r("/5sW"),b=(r("SCKt"),r("0K64"),r("mtWM")),L=r.n(b),y="./static/npb-leagues.json",C="./static/npb-teams.json",x="./static/npb-number-of-visitors-history.json",V="./static/npb-pennant-race-history.json",A=(r("cUYv"),_.a.extend({name:"TabList",props:{labels:{type:Array,required:!0,validator:function(t){return t.every(function(t){return"string"==typeof t})}}},data:function(){return{current:0}},methods:{handleClickItem:function(t){this.current=Math.max(0,Math.min(t,this.labels.length-1)),this.$emit("click-item",t)}}})),P=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"tab-list"},[r("ul",t._l(t.labels,function(e,n){return r("li",{key:e,class:{"is-current":n===t.current}},[r("a",{attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.handleClickItem(n)}}},[t._v(t._s(e))])])}))])},H=[],S={render:P,staticRenderFns:H},k=S,M=r("VU/8"),R=c,B=M(A,k,!1,R,"data-v-72429909",null),w=B.exports,T=r("8r4o"),W=r.n(T),O=r("rcfA"),N=r.n(O),I=r("d7WX"),U=r.n(I),j=r("fw2W"),E=r.n(j),F=_.a.extend({name:"LegendList",props:{series:{type:Array,default:function(){return[]}}}}),$=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"legend-list"},[r("ul",t._l(t.series,function(e){return e.isVisible?r("li",{key:e.id},[r("svg",{attrs:{viewBox:"0 0 32 24",width:"32",height:"24"}},[r("path",{attrs:{d:"M0,12.5 H32",stroke:e.color}})]),t._v(" "),r("span",[t._v(t._s(e.name))])]):t._e()}))])},q=[],D={render:$,staticRenderFns:q},Q=D,X=r("VU/8"),G=f,K=X(F,Q,!1,G,"data-v-47f8916c",null),Z=K.exports,J=_.a.extend({name:"ChartLine",components:{LegendList:Z},props:{svgWidth:{type:Number,default:1140},svgHeight:{type:Number,default:640},paddingBottom:{type:Number,default:24},paddingLeft:{type:Number,default:80},paddingRight:{type:Number,default:40},series:{type:Array,required:!0},lines:{type:Array,default:function(){return[]}},xAxisLabels:{type:Array,default:function(){return[]}},yAxisUnit:{type:String,default:""}},computed:{viewBox:function(){return"0 0 "+this.svgWidth+" "+this.svgHeight},chartHeight:function(){return this.svgHeight-this.paddingBottom},allValues:function(){return this.series.reduce(function(t,e){return t.concat(e)},[])},_maxValue:function(){return Math.max.apply(Math,this.allValues)},_minValue:function(){return Math.min.apply(Math,this.allValues)},maxValue:function(){return U()(this._maxValue,-1*(h(this._maxValue)-2))},minValue:function(){return E()(this._minValue,-1*(h(this._minValue)-2))},valueReminder:function(){return this.maxValue-this.minValue},percentOfSeries:function(){var t=this;return this.series.map(function(e){return e.map(function(e){return(e-t.minValue)/t.valueReminder})})},yAxisLinePropsList:function(){var t="M0,0.5 H"+this.svgWidth;return W()(0,this.chartHeight,this.chartHeight/4).concat([this.chartHeight]).map(function(e){var r=N()(e,2);return{y:r,d:t,transform:"translate(0, "+r+")"}})},yAxisLabelPropsList:function(){var t=this;return[0,.5,1].map(function(e){return{value:t.minValue+t.valueReminder*e,transform:"translate(0, "+N()(t.chartHeight*e*-1,2)+")"}})},yAxisLabelTransform:function(){return"translate(0 "+this.chartHeight+")"},chartWidth:function(){return this.svgWidth-(this.paddingLeft+this.paddingRight)},xAxisStep:function(){return this.chartWidth/Math.max.apply(Math,this.series.map(function(t){return t.length-1}))},seriesLineTransform:function(){return"translate("+this.paddingLeft+" "+this.chartHeight+")"},seriesLinePointList:function(){var t=this;return this.percentOfSeries.map(function(e){return e.map(function(e,r){return[N()(t.xAxisStep*r,2),N()(t.chartHeight*e*-1,2)]})})},seriesLinePropsList:function(){var t=this;return this.seriesLinePointList.map(function(e,r){var n=t.lines[r],i=n.color;return{isVisible:n.isVisible,color:i,points:e.map(function(t){return t.join(" ")}).join(" ")}})},seriesDotPropsList:function(){return this.seriesLinePointList.map(function(t){return t.map(function(t){return{transform:"translate("+t[0]+" "+t[1]+")"}})})},xAxisLabelPropsList:function(){var t=this;return this.xAxisLabels.map(function(e,r){return{value:e,transform:"translate("+N()(t.xAxisStep*r,2)+")"}})}}}),Y=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"chart-line"},[r("LegendList",{attrs:{series:t.lines}}),t._v(" "),r("p",{staticClass:"chart-line__unit"},[t._v(t._s(t.yAxisUnit))]),t._v(" "),r("svg",{attrs:{viewBox:t.viewBox,width:t.svgWidth,height:t.svgHeight}},[r("g",{staticClass:"chart-line__y-step-line"},t._l(t.yAxisLinePropsList,function(t){return r("path",{key:t.y,attrs:{d:t.d,transform:t.transform}})})),t._v(" "),r("g",{staticClass:"chart-line__y-label"},[r("g",{attrs:{transform:t.yAxisLabelTransform}},t._l(t.yAxisLabelPropsList,function(e){return r("text",{key:e.value,attrs:{x:"0",y:"0",transform:e.transform}},[t._v(t._s(e.value))])}))]),t._v(" "),r("g",{attrs:{transform:t.seriesLineTransform}},[r("g",{staticClass:"chart-line__series-line"},t._l(t.seriesLinePropsList,function(e,n){return e.isVisible?r("polyline",{key:n,attrs:{points:e.points,stroke:e.color}}):t._e()})),t._v(" "),r("g",{staticClass:"chart-line__series-dot"},t._l(t.seriesDotPropsList,function(e,n){return t.seriesLinePropsList[n].isVisible?r("g",{key:n,attrs:{fill:t.seriesLinePropsList[n].color}},t._l(e,function(t,e){return r("circle",{key:e,attrs:{cx:"0",cy:"0",transform:t.transform}})})):t._e()}))]),t._v(" "),r("g",{staticClass:"chart-line__x-label"},[r("g",{attrs:{transform:t.seriesLineTransform}},t._l(t.xAxisLabelPropsList,function(e){return r("text",{key:e.value,attrs:{x:"0",y:"0",transform:e.transform}},[t._v(t._s(e.value))])}))])])],1)},z=[],tt={render:Y,staticRenderFns:z},et=tt,rt=r("VU/8"),nt=p,it=rt(J,et,!1,nt,"data-v-3a1d9658",null),st=it.exports,at=_.a.extend({name:"ChartBar",props:{svgWidth:{type:Number,default:1140},svgHeight:{type:Number,default:640},paddingBottom:{type:Number,default:24},paddingLeft:{type:Number,default:120},paddingRight:{type:Number,default:90},series:{type:Array,required:!0},lines:{type:Array,default:function(){return[]}},yAxisUnit:{type:String,default:""}},computed:{viewBox:function(){return"0 0 "+this.svgWidth+" "+this.svgHeight},chartHeight:function(){return this.svgHeight-this.paddingBottom},visibleLines:function(){return this.lines.filter(function(t){return t.isVisible})},visibleSeries:function(){var t=this;return this.lines.length<1?this.series:this.visibleLines.map(function(e){return t.series[e.id]})},_maxValue:function(){return Math.max.apply(Math,this.series)},_minValue:function(){return Math.min.apply(Math,this.series)},maxValue:function(){return U()(this._maxValue,-1*(h(this._maxValue)-2))},minValue:function(){return E()(this._minValue,-1*(h(this._minValue)-2))},valueReminder:function(){return this.maxValue-this.minValue},percentOfSeries:function(){var t=this;return this.visibleSeries.map(function(e){return(e-t.minValue)/t.valueReminder})},yAxisLinePropsList:function(){var t="M0,0.5 H"+this.svgWidth;return W()(0,this.chartHeight,this.chartHeight/4).concat([this.chartHeight]).map(function(e){var r=N()(e,2);return{y:r,d:t,transform:"translate(0, "+r+")"}})},yAxisLabelPropsList:function(){var t=this;return[0,.5,1].map(function(e){return{value:t.minValue+t.valueReminder*e,transform:"translate(0, "+N()(t.chartHeight*e*-1,2)+")"}})},yAxisLabelTransform:function(){return"translate(0 "+this.chartHeight+")"},chartWidth:function(){return this.svgWidth-(this.paddingLeft+this.paddingRight)},xAxisStep:function(){return this.chartWidth/(this.visibleSeries.length-1)},seriesLineTransform:function(){return"translate("+this.paddingLeft+" "+this.chartHeight+")"},seriesLinePointList:function(){var t=this;return this.percentOfSeries.map(function(e,r){return[N()(t.xAxisStep*r,2),N()(t.chartHeight*e*-1,2)]})},seriesLinePropsList:function(){var t=this;return this.seriesLinePointList.map(function(e,r){var n=t.visibleLines[r].color,i=e[0];return{color:n,d:"M0,0 V"+e[1],transform:"translate("+i+")"}})},xAxisLabelPropsList:function(){var t=this;return this.visibleLines.map(function(e,r){return{value:e.name,transform:"translate("+N()(t.xAxisStep*r,2)+")"}})}}}),ut=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"chart-bar"},[r("p",{staticClass:"chart-bar__unit"},[t._v(t._s(t.yAxisUnit))]),t._v(" "),r("svg",{attrs:{viewBox:t.viewBox,width:t.svgWidth,height:t.svgHeight}},[r("g",{staticClass:"chart-bar__y-step-line"},t._l(t.yAxisLinePropsList,function(t){return r("path",{key:t.y,attrs:{d:t.d,transform:t.transform}})})),t._v(" "),r("g",{staticClass:"chart-bar__y-label"},[r("g",{attrs:{transform:t.yAxisLabelTransform}},t._l(t.yAxisLabelPropsList,function(e){return r("text",{key:e.value,attrs:{x:"0",y:"0",transform:e.transform}},[t._v(t._s(e.value))])}))]),t._v(" "),r("g",{attrs:{transform:t.seriesLineTransform}},[r("g",{staticClass:"chart-bar__series-bar"},t._l(t.seriesLinePropsList,function(t,e){return r("path",{key:e,attrs:{d:t.d,stroke:t.color,transform:t.transform}})}))]),t._v(" "),r("g",{staticClass:"chart-bar__x-label"},[r("g",{attrs:{transform:t.seriesLineTransform}},t._l(t.xAxisLabelPropsList,function(e){return r("text",{key:e.value,attrs:{x:"0",y:"0",transform:e.transform}},[t._v(t._s(e.value))])}))])])])},ot=[],lt={render:ut,staticRenderFns:ot},ct=lt,ht=r("VU/8"),ft=m,pt=ht(at,ct,!1,ft,"data-v-348a06dc",null),mt=pt.exports,vt=_.a.extend({name:"LegendListVertical",props:{series:{type:Array,default:function(){return[]}}}}),dt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"legend-list"},[r("ul",t._l(t.series,function(e){return e.isVisible?r("li",{key:e.id},[r("svg",{attrs:{viewBox:"0 0 24 24",width:"24",height:"24"}},[r("rect",{attrs:{width:"16",height:"16",fill:e.color,transform:"translate(4 4)"}})]),t._v(" "),r("span",[t._v(t._s(e.name))])]):t._e()}))])},gt=[],_t={render:dt,staticRenderFns:gt},bt=_t,Lt=r("VU/8"),yt=v,Ct=Lt(vt,bt,!1,yt,"data-v-41dbc399",null),xt=Ct.exports,Vt=2*Math.PI,At=_.a.extend({name:"ChartPie",components:{LegendListVertical:xt},props:{svgWidth:{type:Number,default:640},svgHeight:{type:Number,default:640},chartR:{type:Number,default:160},series:{type:Array,required:!0},pies:{type:Array,default:function(){return[]}}},computed:{viewBox:function(){return this.svgWidth/-2+" "+this.svgHeight/-2+" "+this.svgWidth+" "+this.svgHeight},visiblePies:function(){return this.pies.filter(function(t){return t.isVisible})},visibleSeries:function(){var t=this;return this.pies.length<1?this.series:this.visiblePies.map(function(e){return t.series[e.id]})},totalValue:function(){return this.visibleSeries.reduce(function(t,e){return t+e},0)},percentOfSeries:function(){var t=this,e=0;return this.visibleSeries.map(function(r,n){if(n===t.visibleSeries.length-1)return 1-e;var i=r/t.totalValue;return e+=i,i})},seriesPiePropsList:function(){var t=this,e=this.chartR*Math.cos(0),r=this.chartR*Math.sin(0),n=0;return this.percentOfSeries.map(function(t,e){return{value:t,team:e}}).sort(function(t,e){return e.value-t.value}).map(function(i){var s=i.value,a=i.team,u=t.visiblePies[a].color,o=t.chartR*Math.cos(Vt*s),l=t.chartR*Math.sin(Vt*s),c=[N()(Math.cos(Vt*n),4),N()(Math.sin(Vt*n),4)];return c.push(-1*c[1],c[0],0,1),n+=s,{value:s,color:u,d:"M "+e+" "+r+" a "+t.chartR+" "+t.chartR+" 0 "+(s>.5?1:0)+" 1 "+N()(o-e,2)+" "+N()(l-r,2),transform:"matrix("+c.join(" ")+")"}})}}}),Pt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"chart-pie"},[r("svg",{attrs:{viewBox:t.viewBox,width:t.svgWidth,height:t.svgHeight}},[r("g",{staticClass:"chart-pie__series-pie"},t._l(t.seriesPiePropsList,function(t,e){return r("path",{key:e,attrs:{d:t.d,stroke:t.color,transform:t.transform}})}))]),t._v(" "),r("LegendListVertical",{attrs:{series:t.pies}})],1)},Ht=[],St={render:Pt,staticRenderFns:Ht},kt=St,Mt=r("VU/8"),Rt=d,Bt=Mt(At,kt,!1,Rt,"data-v-34f035c1",null),wt=Bt.exports,Tt=_.a.extend({name:"app",components:{TabList:w,ChartLine:st,ChartBar:mt,ChartPie:wt},data:function(){return{leagues:[],teams:[],numberOfVisitorsHistory:[],pennantRaceHistory:[],lineChartCurrentLeague:0,barChartCurrentLeague:0,barChartCurrentSeason:null,pieChartCurrentLeague:0,pieChartCurrentSeason:null}},computed:{tabLabels:function(){return this.leagues.map(function(t){return t.name})},lineChartHistoryList:function(){return n(this.numberOfVisitorsHistory,this.teams,1e3)},lineChartPropsList:function(){var t=this;return this.teams.map(function(e){return{id:e.id,name:e.name,color:e.color,isVisible:e.league===t.lineChartCurrentLeague}})},lineChartXAxisLabelList:function(){return this.numberOfVisitorsHistory.map(function(t){return t.season}).reverse()},seasonOptionList:function(){return this.numberOfVisitorsHistory.map(function(t){return t.season})},barChartCurrentSeasonList:function(){var t=this,e=this.numberOfVisitorsHistory.find(function(e){return e.season===t.barChartCurrentSeason});return e?e.data.map(function(t){return t.value/1e3}):[]},barChartPropsList:function(){var t=this;return this.teams.map(function(e){return{id:e.id,name:e.name,color:e.color,isVisible:e.league===t.barChartCurrentLeague}})},pieChartCurrentSeasonList:function(){var t=this,e=this.numberOfVisitorsHistory.find(function(e){return e.season===t.pieChartCurrentSeason});return e?e.data.map(function(t){return t.value/1e3}):[]},pipeChartPropsList:function(){var t=this;return this.teams.map(function(e){return{id:e.id,name:e.name,color:e.color,isVisible:e.league===t.pieChartCurrentLeague}})}},methods:{fetchAll:function(){return Promise.all([a(),u(),o(),l()])},handleClickLineChartTabItem:function(t){this.lineChartCurrentLeague=t},handleClickBarChartTabItem:function(t){this.barChartCurrentLeague=t},handleClickPieChartTabItem:function(t){this.pieChartCurrentLeague=t}},created:function(){var t=this;this.fetchAll().then(function(e){var r=e[0],n=e[1],i=e[2],s=e[3],a=Math.max.apply(Math,i.map(function(t){return t.season}));Object.assign(t,{leagues:r,teams:n,numberOfVisitorsHistory:i,pennantRaceHistory:s,barChartCurrentSeason:a,pieChartCurrentSeason:a})}).catch(function(t){return console.error(t.message)})}}),Wt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[t._m(0,!1,!1),t._v(" "),r("div",{staticClass:"container"},[r("h2",[t._v("Line chart")]),t._v(" "),r("p",[t._v("History of NPB's annual visitors.")]),t._v(" "),r("TabList",{attrs:{labels:t.tabLabels},on:{"click-item":t.handleClickLineChartTabItem}}),t._v(" "),r("ChartLine",{attrs:{series:t.lineChartHistoryList,lines:t.lineChartPropsList,xAxisLabels:t.lineChartXAxisLabelList,yAxisUnit:"x 1000"}})],1),t._v(" "),r("div",{staticClass:"container"},[r("h2",[t._v("Bar chart")]),t._v(" "),r("p",[t._v("Annual visitors per team")]),t._v(" "),r("div",{staticClass:"comb-tab-select"},[r("TabList",{attrs:{labels:t.tabLabels},on:{"click-item":t.handleClickBarChartTabItem}}),t._v(" "),r("p",{staticClass:"comb-tab-select__select"},[r("span",[t._v("Season: ")]),t._v(" "),r("select",{directives:[{name:"model",rawName:"v-model",value:t.barChartCurrentSeason,expression:"barChartCurrentSeason"}],on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.barChartCurrentSeason=e.target.multiple?r:r[0]}}},t._l(t.seasonOptionList,function(e){return r("option",{key:e,domProps:{value:e}},[t._v(t._s(e))])}))])],1),t._v(" "),r("ChartBar",{attrs:{series:t.barChartCurrentSeasonList,lines:t.barChartPropsList,yAxisUnit:"x 1000"}})],1),t._v(" "),r("div",{staticClass:"container"},[r("h2",[t._v("Pie chart")]),t._v(" "),r("p",[t._v("Annual visitors per team")]),t._v(" "),r("div",{staticClass:"comb-tab-select"},[r("TabList",{attrs:{labels:t.tabLabels},on:{"click-item":t.handleClickPieChartTabItem}}),t._v(" "),r("p",{staticClass:"comb-tab-select__select"},[r("span",[t._v("Season: ")]),t._v(" "),r("select",{directives:[{name:"model",rawName:"v-model",value:t.pieChartCurrentSeason,expression:"pieChartCurrentSeason"}],on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.pieChartCurrentSeason=e.target.multiple?r:r[0]}}},t._l(t.seasonOptionList,function(e){return r("option",{key:e,domProps:{value:e}},[t._v(t._s(e))])}))])],1),t._v(" "),r("ChartPie",{attrs:{series:t.pieChartCurrentSeasonList,pies:t.pipeChartPropsList}})],1),t._v(" "),t._m(1,!1,!1)])},Ot=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("header",{staticClass:"container"},[r("h1",[t._v("Vue Graph Demo")]),t._v(" "),r("p",[t._v("Demos of graph that render by Vue.js without D3.js.")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("footer",{staticClass:"container"},[r("p",[r("a",{attrs:{href:"https://github.com/haribote/vue-graph-demo",target:"_blank"}},[t._v("Fork on GitHub")])])])}],Nt={render:Wt,staticRenderFns:Ot},It=Nt,Ut=r("VU/8"),jt=g,Et=Ut(Tt,It,!1,jt,null,null),Ft=Et.exports;_.a.config.productionTip=!1,new _.a({el:"#app",render:function(t){return t(Ft)}})},yArI:function(t,e){}},["x35b"]);
//# sourceMappingURL=app.6b0981c1ee3351025b38.js.map